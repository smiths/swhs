\documentclass[12pt]{article}

\usepackage{bm}
\usepackage{amsmath, mathtools}

\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

\hypersetup{
	bookmarks=true,         % show bookmarks bar?
	colorlinks=true,       % false: boxed links; true: colored links
	linkcolor=red,          % color of internal links (change box color with linkbordercolor)
	citecolor=green,        % color of links to bibliography
	filecolor=magenta,      % color of file links
	urlcolor=cyan           % color of external links
}

%% Comments
\newif\ifcomments\commentstrue

\ifcomments
\newcommand{\authornote}[3]{\textcolor{#1}{[#3 ---#2]}}
\newcommand{\todo}[1]{\textcolor{red}{[TODO: #1]}}
\else
\newcommand{\authornote}[3]{}
\newcommand{\todo}[1]{}
\fi

\newcommand{\wss}[1]{\authornote{blue}{SS}{#1}}
\newcommand{\bmac}[1]{\authornote{red}{BM}{#1}}

\newcommand{\progname}{SWHS}

\begin{document}
\title{Module Interface Specification for Solar Water Heating Systems Incorporating Phase Change Material}
\author{Brooks MacLachlan}
\date{\today}

\maketitle

\tableofcontents

\section{Introduction}

The following document details the Module Interface Specifications for the implemented 
modules in a program simulating a Solar Water Heating System with Phase Change Material.
It is intended to ease navigation through the program for design and maintenance purposes.\\
Complementary documents include the System Requirement Specifications and Module Guide. 

\section{Notation}

The following table summarizes the primitive data types used by \progname. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{c c c} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
\bottomrule
\end{tabular} 
\end{center}

\noindent
\progname \ also uses some derived data types: arrays, strings, and structures. Arrays are lists filled with elements of the same data type. Strings are arrays of characters. Structures contain pairs of keys and values, where keys are unique variable names used to identify their corresponding value, and values can be of any data type. \progname \ also uses functions, which are defined by the data types of their inputs and outputs. Functions are described by showing their input data types separated by multiplication symbols on the left side of an arrow, and their output data type on the right side.

\section{Module Decomposition}
The following table is taken directly from the Module Guide document for this project.
\begin{table}[!h]
	\centering
	\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
		\toprule
		\textbf{Level 1} & \textbf{Level 2}\\
		\midrule
		
		{Hardware-Hiding Module} & ~ \\
		\midrule
		
		\multirow{7}{0.3\textwidth}{Behaviour-Hiding Module} & Input Format Module\\
		& Input Parameters Module\\
		& Input Verification Module\\
		& Output Format Module\\
		& Output Verification Module\\
		& Temperature ODEs Module\\
		& Energy Equations Module\\ 
		& Control Module\\
		\midrule
		
		\multirow{3}{0.3\textwidth}{Software Decision Module} & {Sequence Data Structure Module}\\
		& ODE Solver Module\\
		& Plotting Module\\
		\bottomrule
		
	\end{tabular}
	\caption{Module Hierarchy}
	\label{TblMH}
\end{table}

\section{MIS of Control Module} \label{Main}
\subsection{Module}
main
\subsection{Uses}
parameters (\ref{Parameters}), load\_params (\ref{Load}), verify\_params (\ref{VerifyInput}), temperature (\ref{Temperature}), ODE Solvers Module (\ref{ODE}), energy (\ref{Energy}), verify\_output (\ref{VerifyOutput}), plot (\ref{Plot}), output (\ref{Output})
\subsection{Syntax}
\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
main & string & - & - \\
\hline
\end{tabular}
\end{center}
\subsection{Semantics}
\subsubsection{State Variables}
$time$: array of reals \\
$tempW$: array of reals \\
$tempP$: array of reals \\
$latHeat$: array of reals \\
$eW$: array of reals \\
$eP$: array of reals \\ 
$eTot$: array of reals
\subsubsection{Environment Variables}
$win$: 2D array of pixels displayed on the screen
\subsubsection{Access Routine Semantics}
\begin{tabular}{l l p{12cm}}
main($s$): & transition: & $time$, $tempW$, $tempP$, $latHeat$ $eW$, $eP$, $eTot$, $win :=$ $results$[0], $results$[1], $results$[2], $results$[3], $eW1 \| eW2 \| eW3$, $eP1 \| eP2 \| eP3$, ($\forall i \in$ [0..$|post$($eW$)$| - 1$]) ($post$($eW$[$i$]) $+$ $post$($eP$[$i$])), Prints information about the melting of PCM. \\
& exception: & none \\
\end{tabular}

\section{MIS of Input Parameters Module} \label{Parameters}
\subsection{Module}
parameters
\subsection{Uses}
N/A
\subsection{Syntax}
\subsubsection{Exported Data Types}
parameters := structure
\subsubsection{Exported Access Programs}
N/A
\subsection{Semantics}
\subsubsection{State Variables}
$params$.$L$: real \\
$params$.$diam$: real \\
$params$.$Vp$: real \\
$params$.$Ap$: real \\
$params$.$rho\_p$: real \\
$params$.$Tmelt$: real \\
$params$.$C\_ps$: real \\
$params$.$C\_pl$: real \\
$params$.$Hf$: real \\
$params$.$Ac$: real \\
$params$.$Tc$: real \\
$params$.$rho\_w$: real \\
$params$.$C\_w$: real \\
$params$.$hc$: real \\
$params$.$hp$: real \\
$params$.$Tinit$: real \\
$params$.$tstep$: real \\
$params$.$tfinal$: real \\
$params$.$AbsTol$: real \\
$params$.$RelTol$: real \\
$params$.$ConsTol$: real \\
$params$.$Vt$: real \\
$params$.$Mw$: real \\
$params$.$tau\_w$: real \\
$params$.$eta$: real \\
$params$.$Mp$: real \\
$params$.$tau\_ps$: real \\
$params$.$tau\_pl$: real \\
$params$.$Epmelt\_init$: real \\
$params$.$Ep\_melt3$: real \\ 
$params$.$Mw\_noPCM$: real \\
$params$.$tau\_w\_no\_PCM$: real
\subsubsection{Access Routine Semantics}
N/A

\section{MIS of Input Format Module} \label{Load}
\subsection{Module}
load\_params
\subsection{Uses}
parameters (\ref{Parameters})
\subsection{Syntax}
\subsection{Exported Access Programs}
\begin{center}
\begin{tabular}{c c c c}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
load\_params & string & parameters &  - \\
\hline
\end{tabular}
\end{center}
\subsection{Semantics}
\subsubsection{State Variables}
$params$: parameters \\
$param$: array of reals
\subsubsection{Assumptions}
The input string corresponds to an existing filename in the current directory. The input file is formatted correctly.
\subsubsection{Access Routine Semantics}
\begin{center}
\begin{tabular}{l l p{11cm}}
load\_params($s$): & transition: & $params$.$L$, $params$.$diam$, $params$.$Vp$, $params$.$Ap$, $params$.$rho\_p$, $params$.$Tmelt$, $params$.$C\_ps$, $params$.$C\_pl$, $params$.$Hf$, $params$.$Ac$, $params$.$Tc$, $params$.$rho\_w$, $params$.$C\_w$, $params$.$hc$, $params$.$hp$, $params$.$Tinit$, $params$.$tstep$, $params$.$tfinal$, $params$.$AbsTol$, $params$.$RelTol$, $params$.$ConsTol$, $params$.$Vt$, $params$.$Mw$, $params$.$tau\_w$, $params$.$eta$, $params$.$Mp$, $params$.$tau\_ps$, $params$.$tau\_pl$, $params$.$Epmelt\_init$, $params$.$Ep\_melt3$, $params$.$Mw\_noPCM$, $params$.$tau\_w\_noPCM$ $:=$ $param$[0], $param$[1], $param$[2], $param$[3], $param$[4], $param$[5], $param$[6], $param$[7], $param$[8], $param$[9], $param$[10], $param$[11], $param$[12], $param$[13], $param$[14], $param$[15], $param$[16], $param$[17], $param$[18], $param$[19], $param$[20], $param$[21], $param$[22], $param$[23], $param$[24], $param$[25], $param$[26], $param$[27], $param$[28], $param$[29], $param$[30], $param$[31], where $param$ is the array of parameters obtained from the input file $s$ \\
& exception: & none \\
\end{tabular}
\end{center}

\section{MIS of Input Verification Module} \label{VerifyInput}
\subsection{Module}
verify\_params
\subsection{Uses}
parameters (\ref{Parameters})
\subsection{Syntax}
\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{4cm} p{2cm} p{2cm} p{6cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
verify\_valid & parameters & - & badLength, badDiam, badPCMVolume, badPCMAndTankVol, badPCMArea, badPCMDensity, badMeltTemp, badCoilAndInitTemp, badCoilTemp, badPCMHeatCapSolid, badPCMHeatCapLiquid, badHeatFusion, badCoilArea, badWaterDensity, badWaterHeatCap, badCoilCoeff, badPCMCoeff, badInitTemp, badFinalTime, badInitAndMeltTemp \\
\hline
verify\_recommended & parameters & - & - \\
\hline
\end{tabular}
\end{center}
\subsection{Semantics}
\subsubsection{Environment Variables}
$win$: 2D array of pixels displayed on the screen.
\subsubsection{Assumptions}
All of the fields of the input parameters structure have been assigned a value.
\subsubsection{Access Routine Semantics}
\begin{center}
\begin{tabular}{l l p{8cm}}
verify\_valid($params$): & transition: & $win$: (error is thrown $\Rightarrow$ Prints error message) \\
& exceptions: & $exc :=$ ($params.L \leq 0 \Rightarrow$ badLength $|$ $params.diam \leq 0 \Rightarrow$ badDiam $|$ $params.Vp \leq 0 \Rightarrow$ badPCMVolume $|$ $params.Vp \geq params.Vt \Rightarrow$ badPCMAndTankVol $|$ $params.Ap \leq 0 \Rightarrow$ badPCMArea $|$ $params.rho\_p \leq 0 \Rightarrow$ badPCMDensity $|$ $params.Tmelt \leq 0 \lor params.Tmelt \geq params.Tc \Rightarrow$ badMeltTemp $|$ $params.Tc \leq params.Tinit \Rightarrow$ badCoilAndInitTemp $|$ $params.Tc \geq 100 \lor params.Tc \leq 0 \Rightarrow$ badCoilTemp $|$ $params.C\_ps \leq 0 \Rightarrow$ badPCMHeatCapSolid $|$ $params.C\_pl \leq 0 \Rightarrow$ badPCMHeatCapLiquid $|$ $params.Hf \leq 0 \Rightarrow$ badHeatFusion $|$ $params.Ac \leq 0 \Rightarrow$ badCoilArea $|$ $params.rho\_w \leq 0 \Rightarrow$ badWaterDensity $|$ $params.C\_w \leq 0 \Rightarrow$ badWaterHeatCap $|$ $params.hc \leq 0 \Rightarrow$ badCoilCoeff $|$ $params.hp \leq 0 \Rightarrow$ badPCMCoeff $|$ $params.Tinit \leq 0 \lor params.Tinit \geq 100 \Rightarrow$ badInitTemp $|$ $params.tfinal \leq 0 \Rightarrow$ badFinalTime $|$ $params.Tinit \geq params.Tmelt \Rightarrow$ badInitAndMeltTemp)  See Appendix (\ref{Appendix}) for the complete list of exceptions and associated error messages. \\ \\
verify\_recommended($params$): & transition: & $win$: (Warning is thrown $\Rightarrow$ Prints warning message) \\
& exception: & none
\end{tabular}
\end{center}

\section{MIS of Temperature ODEs Module} \label{Temperature}
\subsection{Module}
temperature
\subsection{Uses}
parameters (\ref{Parameters})
\subsection{Syntax}
\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{3cm} p{5cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
temperature1 & array of reals, array of reals, array of reals, parameters & array of functions & - \\
\hline
temperature2 & array of reals, array of reals, array of reals, array of reals, parameters & array of functions & - \\
\hline
temperature3 & array of reals, array of reals, array of reals, parameters & array of functions & - \\
\hline
event1 & array of reals, array of reals, array of reals, parameters & function & - \\
\hline
event2 & array of reals, array of reals, array of reals, array of reals, parameters & function & - \\
\hline
\end{tabular}
\end{center}
\subsection{Semantics}
\subsubsection{State Variables}
$t$: array of reals \\
$Tw1$: array of reals \\
$Tw2$: array of reals \\
$Tw3$: array of reals \\
$Tp1$: array of reals \\
$Tp2$: array of reals \\
$Tp3$: array of reals \\
$Qp2$: array of reals 
\subsubsection{Assumptions}
All of the fields of the input parameters structure have been assigned a value. The values have been properly constrained. 
\subsubsection{Access Routine Semantics}
\begin{center}
\begin{tabular}{l l p{6cm}}
temperature1($t$, $Tw1$, $Tp1$, $params$): & output: & $out :=$ \{$dTw: real \times real \times real \rightarrow real$, $dTp: real \times real \times real \rightarrow real$\} \\
& exception: & none \\ \\
temperature2($t$, $Tw2$, $Tp2$, $Qp2$, $params$): & output: & $out :=$ \{$dTw: real \times real \times real \times real \rightarrow real$, $dTp: real \times real \times real \times real \rightarrow real$, $dQp: real \times real \times real \times real \rightarrow real$\} \\
& exception: & none \\ \\
temperature3($t$, $Tw3$, $Tp3$, $params$): & output: & $out :=$ \{$dTw: real \times real \times real \rightarrow real$, $dTp: real \times real \times real \rightarrow real$\} \\
& exception: & none \\ \\
event1($t$, $Tw1$, $Tp1$, $params$): & output: & $out :=$ $Ev: real \times real \times real \rightarrow real$ \\ 
& exception: & none \\ \\
event2($t$, $Tw2$, $T2p$, $Qp2$, $params$): & output: & $out :=$ $Ev: real \times real \times real \times real \rightarrow real$ \\
& exception: & none \\
\end{tabular}
\end{center}

\section{MIS of ODE Solver Module} \label{ODE}
\subsection{Module}
ODE Solver Module
\subsection{Uses}
N/A
\subsection{Syntax}
\subsubsection{Exported Constants}
$MaxStep$: natural number
$N$: natural number
\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
solve & function, array of reals, array of reals, function, real, real & array of reals ($N$ of them) & ODE\_BAD\_INPUT, ODE\_MAXSTEP \\
\hline 
\end{tabular}
\end{center}
\subsection{Semantics}
\subsubsection{State Variables}
$results$: array of reals ($N$ of them)
\subsubsection{Access Routine Semantics}
\begin{center}
\begin{tabular}{l l p{5cm}}
solve($f$, $domain$, $ics$, $events$, $abstol$, $reltol$) & output: & $out := results$, where $results$ holds the solution to the ODE system generated by the solver. \\
& exceptions: & $exc :=$ (Invalid input parameters $\Rightarrow$ ODE\_BAD\_INPUT $|$ $MaxStep$ steps taken and no solution found $\Rightarrow$ ODE\_MAXSTEP)  \\
\end{tabular}
\end{center}

\section{MIS of Energy Module} \label{Energy}
\subsection{Module}
energy
\subsection{Uses}
parameters (\ref{Parameters})
\subsection{Syntax}
\subsubsection{External Access Programs}
\begin{center}
\begin{tabular}{p{3cm} p{6cm} p{3cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
energy1Wat & array of reals, parameters & array of reals & - \\
\hline
energy1PCM & array of reals, parameters & array of reals & - \\
\hline
energy2Wat & array of reals, parameters & array of reals & - \\
\hline
energy2PCM & array of reals, parameters & array of reals & - \\
\hline
energy3Wat & array of reals, parameters & array of reals & - \\
\hline
energy3PCM & array of reals, parameters & array of reals & - \\
\hline
\end{tabular}
\end{center}
\subsection{Semantics}
\subsubsection{State Variables}
$eW1$: array of reals \\
$eP1$: array of reals \\
$eW2$: array of reals \\
$eP2$: array of reals \\
$eW3$: array of reals \\
$eP3$: array of reals 
\subsubsection{Assumptions}
All of the fields of the input parameters structure have been assigned a value. The values have been properly constrained.
\subsubsection{Access Routine Semantics}
\begin{center}
\begin{tabular}{l l p{6cm}}
energy1Wat($Tw1$, $params$): & transition: & ($\forall i \in [0..|Tw1| - 1]$) ($eW1[i] :=$ watEnergy($Tw1[i]$, $params$)) \\
& output: & $out := eW1$ \\ 
& exception: & none \\ \\
energy1PCM($Tp1$, $params$): & transition: & ($\forall i \in [0..|Tp1| - 1]$) ($eP1[i]:=$ pcmEnergy1($Tp1[i]$, $params$)) \\
& output: & $out := eP1$ \\ 
& exception: & none \\ \\
energy2Wat($Tw2$, $params$): & transition: & ($\forall i \in [0..|Tw2| - 1]$) ($eW2[i] :=$ watEnergy($Tw2[i]$, $params$)) \\
& output: & $out := eW2$ \\ 
& exception: & none \\ \\
energy2PCM($Qp2$, $params$): & transition: & ($\forall i \in [0..|Qp2| - 1]$) ($eP2[i] :=$ pcmEnergy2($Qp2[i]$, $params$)) \\
& output: & $out := eP2$ \\ 
& exception: & none \\ \\
energy3Wat($Tw3$, $params$): & transition: & ($\forall i \in [0..|Tw3| - 1]$) ($eW3[i] :=$ watEnergy($Tw3[i]$, $params$)) \\
& output: & $out := eW3$ \\ 
& exception: & none \\ \\
energy3PCM($Tp3$, $params$): & transition: & ($\forall i \in [0..|Tp3| - 1]$) ($eP3[i] :=$ pcmEnergy3($Tp3[i]$, $params$)) \\
& output: & $out := eP3$ \\
& exception: & none \\
\end{tabular}
\end{center}
\subsubsection{Local Functions}
watEnergy: real $\times$ parameters $\rightarrow$ real \\
watEnergy($Tw$, $params$) $\equiv$ $params.C\_w \times params.Mw \times (Tw - params.Tinit)$ \\
\newline
pcmEnergy1: real $\times$ parameters $\rightarrow$ real \\
pcmEnergy1($Tp$, $params$) $\equiv$ $params.C\_ps \times params.Mp \times (Tp - params.Tinit)$ \\
\newline
pcmEnergy2: real $\times$ parameters $\rightarrow$ real \\
pcmEnergy2($Qp$, $params$) $\equiv$ $params.Epmelt\_init + Qp$ \\
\newline
pcmEnergy3: real $\times$ parameters $\rightarrow$ real \\
pcmEnergy3($Tp$, $params$) $\equiv$ $params.Epmelt\_init + params.Ep\_melt3 + params.C\_pl \times params.Mp \times (Tp - params.Tmelt)$ \\

\section{MIS of Output Verification Module} \label{VerifyOutput}
\subsection{Module}
verify\_output
\subsection{Uses}
parameters (\ref{Parameters})
\subsection{Syntax}
\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{3cm} p{7cm} p{2cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
verify\_output & array of reals, array of reals, array of reals, array of reals, array of reals, parameters & - & - \\
\hline
\end{tabular}
\end{center}
\subsection{Semantics}
\subsubsection{State Variables}
$expEPCM$: array of reals \\
$expEWat$: array of reals \\
$errorWater$: real \\
$errorPCM$: real
\subsubsection{Environment Variables}
$win$: 2D array of pixels displayed on the screen
\subsubsection{Local Variables}
\subsubsection{Assumptions}
All of the fields of the input parameters structure have been assigned a value. The values have been properly constrained. The input arrays are not empty.
\subsubsection{Access Routine Semantics}
\begin{center}
\begin{tabular}{l l p{6cm}}
verify\_output($t$, $Tw$, $Tp$, $Ew$, $Ep$, $params$): & transition: & $expEPCM$, $expEWat$, $errorWater$, $errorPCM$, $win$ $:=$ ($\forall i \in [1..|t| - 1]$) (expectedEp(traprule(delta($t[i-1]$, $t[i]$), $Tw[i]$, $Tp[i]$, $Tw[i-1]$, $Tp[i-1]$), $params$)), ($\forall i \in [1..|t| - 1]$) (expectedEw (expectedEc(traprule(delta($t[i-1]$, $t[i]$), $params.Tc$, $Tw[i]$, $params.Tc$, $Tw[i-1]$), $params$), post($expEPCM$))), error(sum(post($expEWat$)), $Ew[|Ew| - 1]$), error(sum(post($expEPCM$)), $Ep[|Ep| - 1]$), ($errorWater > ConsTol \lor errorPCM > ConsTol \Rightarrow$ Prints warning message(s)) \\
& exception: & none \\
\end{tabular}
\end{center}
\subsubsection{Local Functions}
delta: real $\times$ real $\rightarrow$ real \\
delta($t1$, $t2$) $\equiv$ $t2 - t1$ \\
\newline
traprule: real $\times$ real $\times$ real $\times$ real $\times$ real $\rightarrow$ real \\
traprule($t$, $A1$, $B1$, $A2$, $B2$) $\equiv$ $t \times (A1 - B1 + A2 - B2) / 2$ \\
\newline
expectedEc: real $\times$ parameters $\rightarrow$ real \\
expectedEc($c$, $params$) $\equiv$ $params.hc \times params.Ac \times c$ \\
\newline
expectedEp: real $\times$ parameters $\rightarrow$ real \\
expectedEp($p$, $params$) $\equiv$ $params.hp \times params.Ap \times p$ \\
\newline
expectedEw: real $\times$ real $\rightarrow$ real \\
expectedEw($Ec$, $Ep$) $\equiv$ $Ec - Ep$ \\
\newline
sum: array of reals $\rightarrow$ real \\
sum($a$) $\equiv$ $\sum_{i=0}^{|a| - 1}$ $a[i]$ \\
\newline
error: real $\times$ real $\rightarrow$ real \\
error($exp$, $act$) $\equiv$ $\frac{|exp - act|}{act} \times 100$ \\

\section{MIS of Plotting Module} \label{Plot}
\subsection{Module}
plot
\subsection{Uses}
N/A
\subsection{Syntax}
\subsubsection{Exported Access Programs}
\begin{center}
\begin{tabular}{p{2cm} p{8cm} p{2cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
plot & array of reals, array of reals, array of reals, array of reals, array of reals, string & - & - \\
\hline
\end{tabular}
\end{center}
\subsection{Semantics}
\subsubsection{State Variables}
$plotFilename$: string
\subsubsection{Environment Variables}
$directory$: The current directory of files from which the program is run.
\subsubsection{Assumptions}
The input arrays are all of the same size.
\subsubsection{Access Routine Semantics}
\begin{center}
\begin{tabular}{l l p{6cm}}
plot($t$, $Tw$, $Tp$, $Ew$, $Ep$, $filename$): & transition: & $directory$: writes a .png file named $plotFilename$ containing the graphs of the simulation results. \\
& exception: & none \\
\end{tabular}
\end{center}

\section{MIS of Output Module} \label{Output}
\subsection{Module}
output
\subsection{Uses}
parameters (\ref{Parameters})
\subsection{Syntax}
\subsubsection{Exported Constants}
$max\_width$: integer
\subsubsection{Exported Access Program}
\begin{center}
\begin{tabular}{p{3cm} p{7cm} p{2cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
output & string, array of reals, array of reals, array of reals, array of reals, array of reals, array of reals, parameters & - & - \\
\hline
\end{tabular}
\end{center}
\subsection{Semantics}
\subsubsection{State Variables}
$outFilename$: string
\subsubsection{Environment Variables}
$directory$: The current directory of files from which the program is run.
\subsubsection{Access Routine Semantics}
\begin{center}
\begin{tabular}{l l p{4cm}}
output($params$, $t$, $Tw$, $Tp$, $Ew$, $Ep$, $ETot$, $filename$): & transition: & $directory$: writes a .txt file named $outFilename$ containing the input parameters, calculated parameters, and results of the simulation. \\
& exception: & none \\
\end{tabular}
\end{center}

\section{Appendix} \label{Appendix}
\renewcommand{\arraystretch}{1.2}
\begin{longtable}{l p{12cm}}
\caption{Possible Exceptions} \\
\toprule
\textbf{Message ID} & \textbf{Error Message} \\
\midrule
badLength & Error: Tank length must be $> 0$ \\
badDiam & Error: Tank diameter must be $> 0$ \\
badPCMVolume & Error: PCM volume must be $> 0$ \\
badPCMAndTankVol & Error: PCM volume must be $<$ tank volume \\
badPCMArea & Error: PCM area must be $> 0$ \\
badPCMDensity & Error: rho\_p must be $> 0$ \\
badMeltTemp & Error: Tmelt must be $> 0$ and $< Tc$ \\
badCoilAndInitTemp & Error: Tc must be $>$ Tinit \\
badCoilTemp & Error: Tc must be $> 0$ and $< 100$ \\
badPCMHeatCapSolid & Error: C\_ps must be $> 0$ \\
badPCMHeatCapLiquid & Error: C\_pl must be $> 0$ \\
badHeatFusion & Error: Hf must be $> 0$ \\
badCoilArea & Error: Ac must be $> 0$ \\
badWaterDensity & Error: rho\_w must be $> 0$ \\
badWaterHeatCap & Error: C\_w must be $> 0$ \\
badCoilCoeff & Error: hc must be $> 0$ \\
badPCMCoeff & Error: hp must be $> 0$ \\
badInitTemp & Error: Tinit must be $> 0$ and $< 100$ \\
badFinalTime & Error: tfinal must be $> 0$ \\
badInitAndMeltTemp & Error: Tinit must be $<$ Tmelt \\
ODE\_BAD\_INPUT & Invalid input to ODE solver \\
ODE\_MAXSTEP & ODE solver took $MaxStep$ steps and did not find solution \\
\bottomrule
\end{longtable}

\end{document}